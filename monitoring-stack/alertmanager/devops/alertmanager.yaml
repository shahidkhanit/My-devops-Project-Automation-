global:
  resolve_timeout: 5m
  slack_api_url: "https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"

templates:
  - '*.tmpl'

route:
  group_by: ['alertname', 'cluster', 'type']
  group_wait: 10s
  group_interval: 5m
  repeat_interval: 1h
  receiver: 'default'
  routes:
    - matchers:
      - severity=critical
      - type=infra
      - cluster=devops
      receiver: devops-infra-critical
    - matchers:
      - severity=warning
      - type=infra
      - cluster=devops
      receiver: devops-infra-warning
    - matchers:
      - severity=critical
      - type=service
      - cluster=devops
      receiver: devops-service-critical
    - matchers:
      - severity=warning
      - type=service
      - cluster=devops
      receiver: devops-service-warning

receivers:
- name: 'default'

- name: devops-infra-critical
  slack_configs:
  - channel: '#devops-infra-critical'
    send_resolved: true
    title: 'üî• CRITICAL - {{ .CommonLabels.alertname }}'
    text: '{{ range .Alerts }}{{ .Annotations.description }}{{ end }}'

- name: devops-infra-warning
  slack_configs:
  - channel: '#devops-infra-warning'
    send_resolved: true
    title: '‚ö†Ô∏è WARNING - {{ .CommonLabels.alertname }}'
    text: '{{ range .Alerts }}{{ .Annotations.description }}{{ end }}'

- name: devops-service-critical
  slack_configs:
  - channel: '#devops-service-critical'
    send_resolved: true
    title: 'üî• CRITICAL - {{ .CommonLabels.alertname }}'
    text: '{{ range .Alerts }}{{ .Annotations.description }}{{ end }}'

- name: devops-service-warning
  slack_configs:
  - channel: '#devops-service-warning'
    send_resolved: true
    title: '‚ö†Ô∏è WARNING - {{ .CommonLabels.alertname }}'
    text: '{{ range .Alerts }}{{ .Annotations.description }}{{ end }}'